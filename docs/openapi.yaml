openapi: 3.0.3
info:
  title: Bakery Inventory API
  version: 0.1.0
  description: Core endpoints for the bakery inventory system.
servers:
  - url: http://localhost:8000/api
paths:
  /health:
    get:
      summary: API health check
      responses:
        '200':
          description: OK
          content:
            application/json:
              RawMaterial:
                type: object
                properties:
                  id:
                    type: string
                  name:
                    type: string
                  sku:
                    type: string
                  categoryId:
                    type: string
                  supplierId:
                    type: string
                  unitId:
                    type: string
                  currentStock:
                    type: number
                    format: float
                  minimumStock:
                    type: number
                    format: float
                  maximumStock:
                    type: number
                    format: float
                  costPerUnit:
                    type: number
                    format: float
                  qualityStatus:
                    type: string
                  expirationDate:
                    type: string
                    format: date-time
                  storageLocationId:
                    type: string
                  isContaminated:
                    type: boolean
                  contaminationReason:
                    type: string
                  batchNumber:
                    type: string
                  createdAt:
                    type: string
                    format: date-time
                  updatedAt:
                    type: string
                    format: date-time

              RecipeIngredient:
                type: object
                properties:
                  id:
                    type: string
                  rawMaterialId:
                    type: string
                  rawMaterial:
                    $ref: '#/components/schemas/RawMaterial'
                  finishedProductId:
                    type: string
                  finishedProduct:
                    $ref: '#/components/schemas/FinishedProduct'
                  quantity:
                    type: number
                    format: float
                  unitId:
                    type: string
                  unit:
                    $ref: '#/components/schemas/Unit'
                  notes:
                    type: string
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RawMaterialUpdate'
      responses:
        '200':
          description: Updated
    delete:
      summary: Delete raw material
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '204':
          description: Deleted
components:
  schemas:
    RecipeIngredient:
      type: object
      properties:
        id:
          type: string
        rawMaterialId:
          type: string
        rawMaterial:
          $ref: '#/components/schemas/RawMaterial'
        finishedProductId:
          type: string
        finishedProduct:
          $ref: '#/components/schemas/FinishedProduct'
        quantity:
          type: number
          format: float
        unitId:
          type: string
        unit:
          $ref: '#/components/schemas/Unit'
        notes:
          type: string
      # Duplicate RawMaterial schema removed
        storageLocationId:
          type: string
        isContaminated:
          type: boolean
        contaminationReason:
          type: string
        batchNumber:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    RawMaterialCreate:
      allOf:
        - $ref: '#/components/schemas/RawMaterial'
      required:
        - name
        - sku
        - categoryId
        - unitId
        - currentStock
        - costPerUnit
    RawMaterialUpdate:
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        currentStock:
          type: number
          format: float
        minimumStock:
          type: number
          format: float
        maximumStock:
          type: number
          format: float
        costPerUnit:
          type: number
          format: float
